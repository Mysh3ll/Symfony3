{% trans_default_domain 'FOSUserBundle' %}
{{ dump() }}
<section id="login">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="form-wrap">
                    <h1>Modifier votre<br/> nom d'utilisateur ou e-mail</h1>

                    {# FORM START#}
                    {{ form_start(form, { 'action': path('fos_user_profile_edit'), 'attr': { 'class':'fos_user_profile_edit', 'id' : 'login-form' } }) }}
                    {#{{ form_widget(form) }}#}
                    {#<div>#}
                    {#<input type="submit" value="{{ 'profile.edit.submit'|trans }}" />#}
                    {#</div>#}

                    {# INPUT USERNAME#}
                    {% set class = '' %}
                    {% if not form.username.vars.valid %}
                        {% set class = 'has-error' %}
                    {% endif %}
                    <div class="form-group {{ class }}">
                        {{ form_label(form.username, 'Votre nom d\'utilisateur', {'label_attr': {'class': 'control-label'}}) }}
                        {{ form_widget(form.username, {'attr':{'class':'form-control'}}) }}
                        {#{{ form_errors(form.username) }}#}
                        {% if not form.username.vars.valid %}
                            {% for error in form.username.vars.errors %}
                                <span class="help-block">{{ error.message }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>

                    {# INPUT EMAIL#}
                    {% set class = '' %}
                    {% if not form.email.vars.valid %}
                        {% set class = 'has-error' %}
                    {% endif %}
                    <div class="form-group {{ class }}">
                        {{ form_label(form.email, 'Votre adresse e-mail', {'label_attr': {'class': 'control-label'}}) }}
                        {{ form_widget(form.email, {'attr':{'class':'form-control'}}) }}
                        {#{{ form_errors(form.email) }}#}
                        {% if not form.email.vars.valid %}
                            {% for error in form.email.vars.errors %}
                                <span class="help-block">{{ error.message }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>

                    {# INPUT PASSWORD#}
                    {% set class = '' %}
                    {% if not form.current_password.vars.valid %}
                        {% set class = 'has-error' %}
                    {% endif %}
                    <div class="form-group {{ class }}">
                        {{ form_label(form.current_password, 'Votre mot de passe', {'label_attr': {'class': 'control-label'}}) }}
                        {{ form_widget(form.current_password, {'attr':{'class':'form-control'}}) }}
                        {#{{ form_errors(form.current_password) }}#}
                        {% if not form.current_password.vars.valid %}
                            {% for error in form.current_password.vars.errors %}
                                <span class="help-block">{{ error.message }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>

                    {# INPUT TOKEN CSRF#}
                    <div class="form-group">
                        {{ form_row(form._token) }}
                    </div>

                    {# INPUT SUBMIT#}
                    <input type="submit" class="btn btn-custom btn-lg btn-block"
                           value="{{ 'profile.edit.submit'|trans }}">

                    {# FORM END#}
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</section>
